const InquirerDirectory = require('inquirer-directory');

class SqsInquirerDirectory extends InquirerDirectory {
  constructor(config, inquirerInterface, answers) {
    super(config, inquirerInterface, answers);

    this.config = config;
    this.answers = answers;
  }

  /**
   * We extend the inquirer version of this prompt, to provide
   * a consistent interface as with other Plop prompts, that
   * support a "filter" property in the config.
   *
   * @param {*} cb
   */
  run(cb) {
    return super.run(cb).then((relativePath) => {
      const { filter } = this.config;
      return filter ? filter(relativePath, this.answers) : relativePath;
    });
  }
}

module.exports = SqsInquirerDirectory;