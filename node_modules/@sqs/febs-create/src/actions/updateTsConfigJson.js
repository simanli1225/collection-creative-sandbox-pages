const path = require('path');
const fs = require('fs');
const { writeJsonFileSync } = require('../utils');

/**
 * Given the provided answers, update the tsconfig.json within
 * the cloned example.
 *
 * @param {Object} answers PlopJs answers object
 */
module.exports = function({ directory }) {
  const tsconfigPath = path.join(directory, 'tsconfig.json');
  if (fs.existsSync(tsconfigPath)) {
    const tsconfig = require(tsconfigPath);
    writeJsonFileSync(tsconfigPath, {
      ...tsconfig,
      compilerOptions: {
        preserveSymlinks: true,
        typeRoots: [
          './node_modules/@types'
        ]
      }
    });
  }
};