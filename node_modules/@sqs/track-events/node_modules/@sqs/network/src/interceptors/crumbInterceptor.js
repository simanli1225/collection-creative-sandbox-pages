import {
  crumbKey,
  getCrumbValue,
} from '../crumb';

/**
 * Interceptor that attaches crumb token to SQS API Requests.
 */
export const crumbInterceptor = {
  fulfilledHandler: config => {
    if (config && config.url && config.url.startsWith('/api/')) {
      config.headers[crumbKey] = getCrumbValue();
    }
    return config;
  },
  rejectedHandler: error => Promise.reject(error)
};

export default crumbInterceptor;
