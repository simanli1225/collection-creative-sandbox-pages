const RuleTestRunner = require('../rule-test-runner');

const runner = new RuleTestRunner();

const message = 'Children of the T component must be a string literal';

runner.run('i18n-jsx-string-children', {
  valid: [
    "const myComp = <div><T sub={sub}>{'Testing with a {sub}'}</T></div>",
    "const myComp = <div><T sub={sub}>{'{sub}'}</T></div>",
    'const myComp = <div><T>Testing without subs</T></div>',
    "const myComp = <div><T>{'Testing without subs'}</T></div>",
    'const myComp = <div><T></T></div>',
    'const myComp = <div><T>{`Template strings are ok`}</T></div>',
    'const myComp = <div><T sub={sub}>{`Template strings are ok with {sub}`}</T></div>',
    `const myComp = <div>
      <T sub={sub}>
        {'multi line string literal' +
        'with a {sub}.'}
      </T>
    </div>`,
  ],
  invalid: [
    {
      code: 'const myComp = <T sub={sub}>{sub}</T>',
      errors: [
        {
          message,
          type: 'JSXExpressionContainer',
          line: 1,
          column: 29,
        },
      ],
    },
    {
      code: 'const myComp = <T sub={sub}>Testing with a {sub}</T>',
      errors: [
        {
          message,
          type: 'JSXExpressionContainer',
          line: 1,
          column: 44,
        },
      ],
    },
    {
      code: "const myComp = <T sub={sub}>{'Testing with a ' + sub}</T>",
      errors: [
        {
          message,
          type: 'JSXExpressionContainer',
          line: 1,
          column: 29,
        },
      ],
    },
  ],
});