const RuleTestRunner = require('../rule-test-runner');

const runner = new RuleTestRunner();

runner.run('i18n-valid-project', {
  valid: [
    {
      code: '<T project="strings.campaigns.web">Add a mailing list</T>',
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
    },
    {
      code: "t('Add your site’s colors, logo, and a similar font with one click.', null, {project: 'strings.campaigns.web',})",
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
    },
    {
      code: '<T project="strings.campaigns.web" learnMore={learnMoreLink}>\n{\'Subscriber automations require a website or scheduling plan. {learnMore}.\'}</T>',
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
    },
  ],
  invalid: [
    {
      code: '<T project="jfirdaoejfiorf">Add a mailing list</T>',
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
      errors: [
        {
          messageId: 'invalidProjectName',
          type: 'JSXElement',
        },
      ],
    },
    {
      code: "t('Add your site’s colors, logo, and a similar font with one click.', null, {project: 'fejaifjiaelfe',})",
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
      errors: [
        {
          messageId: 'invalidProjectName',
          type: 'ObjectExpression',
        },
      ],
    },
    {
      code: '<T project="jfieowjfie" learnMore={learnMoreLink}>\n{\'Subscriber automations require a website or scheduling plan. {learnMore}.\'}</T>',
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
      errors: [
        {
          messageId: 'invalidProjectName',
          type: 'JSXElement',
        },
      ],
    },
    {
      code: "<T>\n{'Subscriber automations require a website or scheduling plan. {learnMore}.'}</T>",
      options: [
        {
          allow: [
            'strings.campaigns.web',
            'strings.campaigns.unsubscribe',
            'imageEditor.ui',
          ],
        },
      ],
      errors: [
        {
          message: 'Your T component should have a "project" attribute.',
          type: 'JSXElement',
        },
      ],
    },
    {
      code: '<T project="blah">Test empty options (dev did not pass in an "allow" object)</T>',
      options: [],
      errors: [
        {
          messageId: 'noAllowedProjectStringsSpecified',
          type: 'JSXElement',
        },
      ],
    },
    {
      code: "t('Test empty options (dev did not pass in an allow object)', null, {project: 'fejaifjiaelfe',})",
      options: [],
      errors: [
        {
          messageId: 'noAllowedProjectStringsSpecified',
          type: 'ObjectExpression',
        },
      ],
    },
  ],
});
