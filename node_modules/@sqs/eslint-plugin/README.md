# @sqs/eslint-plugin

Squarespace ESLint plugin

## Installation

You'll first need to install [ESLint](http://eslint.org):

```
$ npm i eslint --save-dev
```

Next, install `@sqs/eslint-plugin`:

```
$ npm install @sqs/eslint-plugin --save-dev
```

**Note:** If you installed ESLint globally (using the `-g` flag) then you must also install `@sqs/eslint-plugin` globally.

## Usage

Add `@sqs` to the plugins section of your `.eslintrc` configuration file. You can omit `eslint-plugin`:

```json
{
    "plugins": [
        "@sqs"
    ]
}
```


Then configure the rules you want to use under the rules section.

```json
{
    "rules": {
        "@sqs/rule-name": "error"
    }
}
```

## Rules
* `i18n-jsx-string-children`
* `i18n-jsx-no-nested-elements`
* `i18n-jsx-wrapped-literals`
* `i18n-no-missing-notes`
* `no-window-delete`
* `prefer-apostrophe-in-string-literal`
* `no-locale-in-help-center-article-link`

> Note: i18n rules are not managed by the i18n team

#### `i18n-jsx-no-nested-elements`
Disallow nested literals in react components
  ```javascript
  <div><T>{'Testing My {component}'}</T></div> // valid
  <div>This is <div>my component</div></div> // invalid
  ```

#### `i18n-jsx-string-children`
Disallow non-string children in translation components
  ```javascript
  <T sub={sub}>{'{sub}'}</T> // valid
  <T sub={sub}>{sub}</T> // invalid
  ```

#### `i18n-jsx-wrapped-literals`
Ensures literals are properly wrapped.
  ```javascript
  <div><T>Testing My Component</T></div> // valid
  <div>Testing My Component</div> // invalid
  ```

#### `i18n-no-missing-notes`
Ensures `t()` and `<T>`'s include a notes attribute.
  ```javascript
  <T project="myproject" notes="my notes">Testing My Component</T> // valid
  <T project="myproject">Testing My Component</T> // invalid
  ```

### `no-window-delete`
Disallow deleting protected window properties without try/catch
  ```javascript
  try { delete window.onerror; } catch(e) { console.log(e); } // valid
  delete window.onerror; // invalid
  ```

#### `prefer-apostrophe-in-string-literal`
Prefer the apostrophe symbol (instead of single quote) in string literals. Does not check throw statements, `describe` block, `it` blocks, or comments. Not automatically fixable.

  ```javascript
  myFunc("Let's go to the movies"); // invalid
  myOtherFunc('Let\'s go to the movies'); // invalid
  const myVariable = "We'll go to the movies"; //invalid 

  myFunc("Let’s go to the movies"); // valid
  const myVariable = "We’ll go to the movies"; //valid
  // does not error/warn when it is a single quote used to denote a quote/string
  const quote = 'These single quotes are not used in a contraction or possessive'; //valid
  ```

#### `no-locale-in-help-center-article-link`
Disallow locale specific Help Center article link. Not automatically fixable.

```js
const myUrl = "https://support.squarespace.com/hc/en-us/articles/206756327"; // invalid
const myOtherUrl = "/api/auth/sso/help?path=/hc/en-us/articles/123" //invalid

// locale is removed from url
const myUrl = "https://support.squarespace.com/hc/articles/206756327"; // valid
const myOtherUrl = "/api/auth/sso/help?path=/hc/articles/123" //valid
```

### Troubleshooting
@see [TROUBLESHOOTING.md](../../TROUBLESHOOTING.md)

### Contributing

@see [CONTRIBUTING.md](https://github.com/sqsp/sqs-eslint-plugin-squarespace/blob/master/CONTRIBUTING.md)