"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
require("core-js/modules/es.array.concat.js");
require("core-js/modules/es.array.includes.js");
require("core-js/modules/es.object.to-string.js");
require("core-js/modules/es.string.includes.js");
function _default(formatter) {
  var _this = this;
  return function (value, locale) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    var formatterOptions = !Array.isArray(options) ? [options] : options;
    var optionsAreFormattedForObjectArgs = formatterOptions.some(function (opt) {
      return opt.includes('|');
    });
    if (!formatterOptions.length || !optionsAreFormattedForObjectArgs) {
      return formatter.apply(_this, [value].concat((0, _toConsumableArray2.default)(formatterOptions)));
    }
    var formatterOptionsObject = formatterOptions.reduce(function (collector, opt) {
      var optParts = opt.split('|');
      var optKey = optParts[0];
      var optVal = optParts[1] || optParts[0];
      collector[optKey] = isNaN(optVal) ? optVal : parseFloat(optVal);
      return collector;
    }, {});
    return formatter(value, formatterOptionsObject);
  };
}
module.exports = exports.default;