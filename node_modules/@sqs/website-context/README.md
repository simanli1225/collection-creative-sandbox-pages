# @sqs/website-context

This package is a wrapper around global context data (`window.Static.SQUARESPACE_CONTEXT`) for all website and visitor pages.
The data is populated on the Backend via [StaticSquarespaceContext.java](/site-server/src/main/java/com/squarespace/v6/template/contexts/statics/StaticSquarespaceContext.java).

Accessing static data via `window.Static` should be avoided if possible. Use this package instead.

### Caution when using in `universal/`
Do not declare this package as a top level import in a [rollup](https://github.com/sqsp/config-frontend/blob/d9b05ab118bc9c8b776eab2bb3cb5275fc10ac8c/docs/rollup-system.md).  

Do not import this package from a module that is declared as a top level import in a rollup, for instance
[this import](https://github.com/sqsp/config-frontend/pull/11157/files#diff-d933945894d1431f1120a86cd44688689c8a59f9722e47bf7472a760944d5837R2)
ends up in [this module](https://github.com/sqsp/config-frontend/pull/11157/files#diff-e82cff5febfff868c6791df7e243a084eb85b410a56ae96abc277b5a70ede8abR6)
which is a top level import in [common/bootstrap.js](https://github.com/sqsp/config-frontend/blob/d9b05ab118bc9c8b776eab2bb3cb5275fc10ac8c/site-server/src/main/webapp/universal/src/common/bootstrap.js#L58), which ends up being built into the [common.js rollup](https://github.com/sqsp/config-frontend/blob/d9b05ab118bc9c8b776eab2bb3cb5275fc10ac8c/site-server/src/main/webapp/universal/scripts-v6/common.js#L24).
It is not guaranteed that the common.js rollup will execute after the static context has been set.  See [COE-4148](https://docs.google.com/document/d/1cuN6U2G4r73n5a0hFPOs64G99pWT53fvrfAqMENMA2E/edit).

### Do not use on CMS `config/` pages

V6's Backend has different implementations for attaching static data onto HTML pages. This package is exclusively typed for data generated by `StaticSquarespaceContext.java`. Which is used on all websites and visitor type pages. 

`window.Static.SQUARESPACE_CONTEXT` contains a different set of properties on CMS / authenticated pages.
