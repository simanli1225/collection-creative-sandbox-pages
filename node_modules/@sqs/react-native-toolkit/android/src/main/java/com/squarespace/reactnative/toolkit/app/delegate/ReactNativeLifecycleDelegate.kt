package com.squarespace.reactnative.toolkit.app.delegate

import android.app.Activity
import android.content.Intent
import com.facebook.react.ReactInstanceManager
import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler
import com.squarespace.android.commons.app.delegate.LifecycleDelegate

class ReactNativeLifecycleDelegate(
  private val activity: Activity,
  private val reactInstanceManager: ReactInstanceManager?
) : LifecycleDelegate, DefaultHardwareBackBtnHandler {

  override fun invokeDefaultOnBackPressed() {
    activity.onBackPressed()
  }

  override fun onNewIntent(intent: Intent?) {
    reactInstanceManager?.onNewIntent(intent)
  }

  override fun onResume() {
    reactInstanceManager?.onHostResume(activity, this)
  }

  override fun onPause() {
    reactInstanceManager?.onHostPause(activity)
  }

  override fun onDestroy() {
    reactInstanceManager?.onHostDestroy(activity)
  }
}