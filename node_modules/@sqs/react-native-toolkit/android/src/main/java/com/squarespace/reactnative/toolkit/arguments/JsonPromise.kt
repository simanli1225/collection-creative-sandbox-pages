package com.squarespace.reactnative.toolkit.arguments

import com.facebook.react.bridge.Promise
import com.google.gson.JsonElement

/**
 * Extended Promise which properly accepts [JsonElement]s as a resolution.
 */
class JsonPromise(private val promise: Promise) : Promise by promise {
  override fun resolve(value: Any?) {
    when (value) {
      is JsonElement -> promise.resolve(ArgumentUtils.fromJsonElement(value))
      else -> promise.resolve(value)
    }
  }
}