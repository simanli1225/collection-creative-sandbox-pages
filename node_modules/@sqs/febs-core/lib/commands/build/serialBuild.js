"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("./utils");
const runWebpack_1 = __importDefault(require("./runWebpack"));
async function serialBuild(webpackConfigs, config) {
    const results = [];
    const envs = utils_1.getWebpackConfigEnvArgs(config);
    const numMultiConfigs = webpackConfigs.length / envs.length;
    const envByConfigIdx = envs.reduce((acc, env) => {
        for (let multiConfigIdx = 0; multiConfigIdx < numMultiConfigs; multiConfigIdx++) {
            acc.push(env);
        }
        return acc;
    }, []);
    for (const j in webpackConfigs) {
        const env = envByConfigIdx[j];
        const webpackConfig = utils_1.getSingleCustomConfig(config, env, Number(j));
        const r = await runWebpack_1.default(webpackConfig, config);
        results.push(r);
    }
    return results;
}
exports.default = serialBuild;
//# sourceMappingURL=serialBuild.js.map