"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const febs_logger_1 = __importDefault(require("@sqs/febs-logger"));
const serialize_error_1 = __importDefault(require("serialize-error"));
const runWebpack_1 = __importDefault(require("./runWebpack"));
const utils_1 = require("./utils");
exports.default = (config, env, webpackConfigIndex, callback) => {
    febs_logger_1.default.setLevel(config.logLevel);
    febs_logger_1.default.debug('Starting child build for config #%s', webpackConfigIndex);
    const webpackConfig = utils_1.getSingleCustomConfig(config, env, webpackConfigIndex);
    return runWebpack_1.default(webpackConfig, config)
        .then(output => {
        callback(null, output);
    })
        .catch((err) => {
        callback(serialize_error_1.default(err), null);
    });
};
//# sourceMappingURL=parallelBuildChild.js.map