"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizeEnvVars = void 0;
const varMap = {
    BRANCH_NAME: ['DRONE_COMMIT_BRANCH', 'bamboo_planRepository_branchName'],
    BUILD_NUMBER: ['DRONE_BUILD_NUMBER', 'bamboo_buildNumber'],
};
const normalizeEnvVars = (env = {}) => {
    const envList = Object.entries(env);
    const varMapEntries = Object.entries(varMap);
    const result = {};
    envList.forEach(([key, value]) => {
        const foundKey = (varMapEntries.find(([targetKey, envHaystack]) => {
            return envHaystack.includes(key);
        }) || [])[0];
        if (foundKey) {
            if (result[foundKey]) {
                console.warn(`[env.js] Warning, klobbering a result. "${foundKey}" already ` +
                    `has a value "${result[foundKey]}". Overwritting with the value of "${key}", which is "${value}"`);
            }
            result[foundKey] = value;
        }
        else {
            result[key] = value;
        }
    });
    return result;
};
exports.normalizeEnvVars = normalizeEnvVars;
//# sourceMappingURL=env-utils.js.map