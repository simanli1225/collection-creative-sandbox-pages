"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createQueuedWriter = void 0;
function createQueuedWriter(writer) {
    const queue = [];
    function iterator(callback) {
        return function (err) {
            queue.shift();
            callback(err);
            const next = queue[0];
            if (next) {
                writer(next.content, next.path, iterator(next.callback));
            }
        };
    }
    return function queuedWriter(content, path, callback) {
        const empty = !queue.length;
        queue.push({ content, path, callback });
        if (empty) {
            writer(content, path, iterator(callback));
        }
    };
}
exports.createQueuedWriter = createQueuedWriter;
//# sourceMappingURL=queuedFileWriter.js.map