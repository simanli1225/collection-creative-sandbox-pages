{"version":3,"file":"init.js","sourceRoot":"","sources":["../../src/internals/init.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAgB,MAAM,WAAW,CAAC;AACtD,OAAO,EAAE,WAAW,EAAE,MAAM,UAAU,CAAC;AAUvC,OAAO,EAAE,qBAAqB,EAAE,MAAM,aAAa,CAAC;AACpD,OAAO,EAAE,sBAAsB,EAAE,MAAM,cAAc,CAAC;AACtD,OAAO,EAAE,oBAAoB,EAAE,MAAM,WAAW,CAAC;AACjD,OAAO,EAAE,mBAAmB,EAAE,MAAM,WAAW,CAAC;AAChD,OAAO,EAAE,iBAAiB,EAAE,MAAM,SAAS,CAAC;AAC5C,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAEvD;;GAEG;AACH;IAYE,uBACE,MAAoB,EACpB,OAAe,EACf,KAAsB,EACtB,YAA6B,EAC7B,gBAA6B;QAF7B,sBAAA,EAAA,aAAsB;QACtB,6BAAA,EAAA,oBAA6B;QAC7B,iCAAA,EAAA,qBAA6B;QAE7B,8DAA8D;QAC9D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAM,IAAI,GAAG,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC;QACrC,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;QAE7E,IAAI,CAAC,SAAS,GAAG,IAAI,qBAAqB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;QACnE,IAAI,CAAC,UAAU,GAAG,IAAI,sBAAsB,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,GAAG,IAAI,oBAAoB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,OAAO,GAAG,IAAI,mBAAmB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;QAC/D,IAAI,CAAC,KAAK,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC;IACH,oBAAC;AAAD,CAAC,AAjCD,IAiCC","sourcesContent":["import { KeyIndexMap, Schema } from '@phensley/cldr-types';\nimport { CodeBuilder, SchemaConfig } from '../schema';\nimport { buildSchema } from './schema';\nimport {\n  CalendarInternals,\n  DateFieldInternals,\n  GeneralInternals,\n  Internals,\n  NumberInternals,\n  UnitInternals,\n} from './internals';\n\nimport { CalendarInternalsImpl } from './calendars';\nimport { DateFieldInternalsImpl } from './datefields';\nimport { GeneralInternalsImpl } from './general';\nimport { NumberInternalsImpl } from './numbers';\nimport { UnitsInternalImpl } from './units';\nimport { checksumIndices } from '../resource/checksum';\n\n/**\n * @internal\n */\nexport class InternalsImpl implements Internals {\n  readonly schema: Schema;\n  readonly config: SchemaConfig;\n  readonly indices: KeyIndexMap;\n  readonly checksum: string;\n\n  readonly calendars: CalendarInternals;\n  readonly dateFields: DateFieldInternals;\n  readonly general: GeneralInternals;\n  readonly numbers: NumberInternals;\n  readonly units: UnitInternals;\n\n  constructor(\n    config: SchemaConfig,\n    version: string,\n    debug: boolean = false,\n    skipChecksum: boolean = false,\n    patternCacheSize: number = 50,\n  ) {\n    // TODO: may move this up depending on how integration evolves\n    this.config = config;\n    const code = new CodeBuilder(config);\n    const origin = code.origin();\n    this.indices = origin.indices;\n    this.schema = buildSchema(origin, debug);\n    this.checksum = skipChecksum ? '' : checksumIndices(version, origin.indices);\n\n    this.calendars = new CalendarInternalsImpl(this, patternCacheSize);\n    this.dateFields = new DateFieldInternalsImpl(this);\n    this.general = new GeneralInternalsImpl(this, patternCacheSize);\n    this.numbers = new NumberInternalsImpl(this, patternCacheSize);\n    this.units = new UnitsInternalImpl(this);\n  }\n}\n"]}