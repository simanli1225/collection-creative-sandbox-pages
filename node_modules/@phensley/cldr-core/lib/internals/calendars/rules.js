"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DayPeriodRules = void 0;
var cldr_utils_1 = require("@phensley/cldr-utils");
var string_1 = require("../../utils/string");
var autogen_dayperiods_1 = require("./autogen.dayperiods");
var parseRule = function (raw) {
    var parts = raw.split('|');
    var minutes = (0, string_1.numarray)(parts[1], 36);
    var keys = (0, string_1.numarray)(parts[0]).map(function (n) { return autogen_dayperiods_1.dayPeriodKeys[n]; });
    return { keys: keys, minutes: minutes };
};
var DayPeriodRules = /** @class */ (function () {
    function DayPeriodRules(cacheSize) {
        this.cache = new cldr_utils_1.Cache(parseRule, cacheSize);
    }
    DayPeriodRules.prototype.get = function (bundle, minutes) {
        var raw = autogen_dayperiods_1.dayPeriodRules[bundle.languageRegion()] || autogen_dayperiods_1.dayPeriodRules[bundle.language()];
        if (raw === undefined) {
            return undefined;
        }
        var rule = this.cache.get(raw);
        var i = (0, cldr_utils_1.binarySearch)(rule.minutes, true, minutes);
        return rule.keys[i];
    };
    return DayPeriodRules;
}());
exports.DayPeriodRules = DayPeriodRules;
//# sourceMappingURL=rules.js.map